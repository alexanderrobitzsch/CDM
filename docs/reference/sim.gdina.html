<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulation of the GDINA model — sim.gdina • CDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulation of the GDINA model — sim.gdina"><meta property="og:description" content="The function sim.gdina.prepare creates necessary design matrices
Mj, Aj and necc.attr. In most cases, only the list
of item parameters delta must be modified by the user when
applying the simulation function sim.gdina. The distribution of latent
classes \(\alpha\) is represented by an underlying multivariate normal distribution
\(\alpha^\ast\) for which a mean vector thresh.alpha and a
covariance matrix cov.alpha must be specified.
Alternatively, a matrix of skill classes alpha
can be given as an input.
Note that this version of sim.gdina only works for dichotomous attributes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">8.4</span
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/alexanderrobitzsch/CDM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulation of the GDINA model</h1>
    
    <div class="hidden name"><code>sim.gdina.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function <code>sim.gdina.prepare</code> creates necessary design matrices
<code>Mj</code>, <code>Aj</code> and <code>necc.attr</code>. In most cases, only the list
of item parameters <code>delta</code> must be modified by the user when
applying the simulation function <code>sim.gdina</code>. The distribution of latent
classes \(\alpha\) is represented by an underlying multivariate normal distribution
\(\alpha^\ast\) for which a mean vector <code>thresh.alpha</code> and a
covariance matrix <code>cov.alpha</code> must be specified.
Alternatively, a matrix of skill classes <code>alpha</code>
can be given as an input.</p>
<p>Note that this version of <code>sim.gdina</code> only works for dichotomous attributes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim.gdina</span><span class="op">(</span><span class="va">n</span>, <span class="va">q.matrix</span>, <span class="va">delta</span>, link<span class="op">=</span><span class="st">"identity"</span>,  thresh.alpha<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>    cov.alpha<span class="op">=</span><span class="cn">NULL</span>, alpha<span class="op">=</span><span class="cn">NULL</span>, <span class="va">Mj</span>, <span class="va">Aj</span>, <span class="va">necc.attr</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">sim.gdina.prepare</span><span class="op">(</span> <span class="va">q.matrix</span> <span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>n</dt>
<dd><p>Number of persons</p></dd>

  <dt>q.matrix</dt>
<dd><p>Q-matrix (see <code><a href="sim.din.html">sim.din</a></code>)</p></dd>

  <dt>delta</dt>
<dd><p>List with \(J\) entries where \(J\) is the number of items.
Every list element corresponds to the parameter of an item.</p></dd>

  <dt>link</dt>
<dd><p>Link function. Choices are <code>identity</code> (default), <code>logit</code> and <code>log</code>.</p></dd>

  <dt>thresh.alpha</dt>
<dd><p>Vector of thresholds (means) of \(\alpha^\ast\)</p></dd>

  <dt>cov.alpha</dt>
<dd><p>Covariance matrix of \(\alpha^\ast\)</p></dd>

  <dt>alpha</dt>
<dd><p>Matrix of skill classes if they should not be simulated</p></dd>

  <dt>Mj</dt>
<dd><p>Design matrix, see <code><a href="gdina.html">gdina</a></code></p></dd>

  <dt>Aj</dt>
<dd><p>Design matrix, see <code><a href="gdina.html">gdina</a></code></p></dd>

  <dt>necc.attr</dt>
<dd><p>List with \(J\) entries containing necessary attributes
for each item</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The output of <code>sim.gdina</code> is a list with following entries:</p>
<dl><dt>data</dt>
<dd><p>Simulated item responses</p></dd>

  <dt>alpha</dt>
<dd><p>Data frame with simulated attributes</p></dd>

  <dt>q.matrix</dt>
<dd><p>Used Q-matrix</p></dd>

  <dt>delta</dt>
<dd><p>Used delta item parameters</p></dd>

  <dt>Aj</dt>
<dd><p>Design matrices \(A_j\)</p></dd>

  <dt>Mj</dt>
<dd><p>Design matrices \(M_j\)</p></dd>

  <dt>link</dt>
<dd><p>Used link function</p></dd>


</dl><p>The function <code>sim.gdina.prepare</code> possesses the following values as output
in a list: <code>delta</code>, <code>necc.attr</code>, <code>Aj</code> and <code>Mj</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>de la Torre, J. (2011). The generalized DINA model framework.
  <em>Psychometrika, 76</em>, 179--199.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>For estimating the GDINA model see <code><a href="gdina.html">gdina</a></code>.</p>
<p>See the <code>GDINA::simGDINA</code> function in the
<span class="pkg">GDINA</span> package for similar functionality.</p>
<p>See <code><a href="sim_model.html">sim_model</a></code> for a general simulation function.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">#############################################################################</span></span>
<span><span class="co"># EXAMPLE 1: Simulating the GDINA model</span></span>
<span><span class="co">#############################################################################</span></span>
<span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">50</span>             <span class="co"># number of persons</span></span>
<span><span class="co"># define Q-matrix</span></span>
<span><span class="va">q.matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>, <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>, <span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>, <span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,</span>
<span>    <span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span>, <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,  <span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,  <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>, <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fl">3</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># thresholds for attributes alpha^\ast</span></span>
<span><span class="va">thresh.alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.65</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">.30</span> <span class="op">)</span></span>
<span><span class="co"># covariance matrix for alpha^\ast</span></span>
<span><span class="va">cov.alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">cov.alpha</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cov.alpha</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">.4</span></span>
<span><span class="va">cov.alpha</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cov.alpha</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">.6</span></span>
<span><span class="va">cov.alpha</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cov.alpha</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">.8</span></span>
<span></span>
<span><span class="co"># prepare design matrix by applying sim.gdina.prepare function</span></span>
<span><span class="va">rp</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina.prepare</span><span class="op">(</span> <span class="va">q.matrix</span> <span class="op">)</span></span>
<span><span class="va">delta</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">delta</span></span>
<span><span class="va">necc.attr</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">necc.attr</span></span>
<span><span class="va">Aj</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">Aj</span></span>
<span><span class="va">Mj</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">Mj</span></span>
<span><span class="co"># define delta parameters</span></span>
<span><span class="co"># intercept - main effects - second order interactions - ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">delta</span><span class="op">)</span>  <span class="co">#=&gt; modify the delta parameter list which contains only zeroes as default</span></span>
<span><span class="co">##   List of 9</span></span>
<span><span class="co">##    $ : num [1:4] 0 0 0 0</span></span>
<span><span class="co">##    $ : num [1:4] 0 0 0 0</span></span>
<span><span class="co">##    $ : num [1:4] 0 0 0 0</span></span>
<span><span class="co">##    $ : num [1:2] 0 0</span></span>
<span><span class="co">##    $ : num [1:2] 0 0</span></span>
<span><span class="co">##    $ : num [1:2] 0 0</span></span>
<span><span class="co">##    $ : num [1:8] 0 0 0 0 0 0 0 0</span></span>
<span><span class="co">##    $ : num [1:4] 0 0 0 0</span></span>
<span><span class="co">##    $ : num [1:4] 0 0 0 0</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.2</span>, <span class="fl">.1</span>, <span class="fl">.15</span>, <span class="fl">.4</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.2</span>, <span class="fl">.3</span>, <span class="fl">.3</span>, <span class="op">-</span><span class="fl">.2</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.2</span>, <span class="fl">.2</span>, <span class="fl">.2</span>, <span class="fl">0</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.15</span>, <span class="fl">.6</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.1</span>, <span class="fl">.7</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.25</span>, <span class="fl">.65</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.25</span>, <span class="fl">.1</span>, <span class="fl">.1</span>, <span class="fl">.1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.25</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">8</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.2</span>, <span class="fl">0</span>, <span class="fl">.3</span>, <span class="op">-</span><span class="fl">.1</span> <span class="op">)</span></span>
<span><span class="va">delta</span><span class="op">[[</span><span class="fl">9</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">.2</span>, <span class="fl">.2</span>, <span class="fl">0</span>, <span class="fl">.3</span> <span class="op">)</span></span>
<span></span>
<span><span class="co">#******************************************</span></span>
<span><span class="co"># Now, the "real simulation" starts</span></span>
<span><span class="va">sim.res</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina</span><span class="op">(</span> n<span class="op">=</span><span class="va">n</span>, q.matrix<span class="op">=</span><span class="va">q.matrix</span>, delta<span class="op">=</span><span class="va">delta</span>, link<span class="op">=</span><span class="st">"identity"</span>,</span>
<span>                thresh.alpha<span class="op">=</span><span class="va">thresh.alpha</span>, cov.alpha<span class="op">=</span><span class="va">cov.alpha</span>,</span>
<span>                Mj<span class="op">=</span><span class="va">Mj</span>, Aj<span class="op">=</span><span class="va">Aj</span>, necc.attr<span class="op">=</span><span class="va">necc.attr</span><span class="op">)</span></span>
<span><span class="co"># sim.res$data      # simulated data</span></span>
<span><span class="co"># sim.res$alpha     # simulated alpha</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="co">#############################################################################</span></span>
<span><span class="co"># EXAMPLE 2: Simulation based on already estimated GDINA model for data.ecpe</span></span>
<span><span class="co">#############################################################################</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data.ecpe</span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">data.ecpe</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">q.matrix</span> <span class="op">&lt;-</span> <span class="va">data.ecpe</span><span class="op">$</span><span class="va">q.matrix</span></span>
<span></span>
<span><span class="co">#***</span></span>
<span><span class="co"># (1) estimate GDINA model</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu"><a href="gdina.html">gdina</a></span><span class="op">(</span> data<span class="op">=</span><span class="va">dat</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, q.matrix<span class="op">=</span><span class="va">q.matrix</span> <span class="op">)</span></span>
<span></span>
<span><span class="co">#***</span></span>
<span><span class="co"># (2) simulate data according to GDINA model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">977</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare design matrix by applying sim.gdina.prepare function</span></span>
<span><span class="va">rp</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina.prepare</span><span class="op">(</span> <span class="va">q.matrix</span> <span class="op">)</span></span>
<span><span class="va">necc.attr</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">necc.attr</span></span>
<span></span>
<span><span class="co"># number of subjects to be simulated</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">3000</span></span>
<span><span class="co"># simulate attribute patterns</span></span>
<span><span class="va">probs</span> <span class="op">&lt;-</span> <span class="va">mod</span><span class="op">$</span><span class="va">attribute.patt</span><span class="op">$</span><span class="va">class.prob</span>   <span class="co"># probabilities</span></span>
<span><span class="va">patt</span> <span class="op">&lt;-</span> <span class="va">mod</span><span class="op">$</span><span class="va">attribute.patt.splitted</span>      <span class="co"># response patterns</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="va">patt</span><span class="op">[</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">probs</span><span class="op">)</span> <span class="op">)</span>, <span class="va">n</span>, prob<span class="op">=</span><span class="va">probs</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># simulate data using estimated item parameters</span></span>
<span><span class="va">sim.res</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina</span><span class="op">(</span> n<span class="op">=</span><span class="va">n</span>, q.matrix<span class="op">=</span><span class="va">q.matrix</span>, delta<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">delta</span>, link<span class="op">=</span><span class="st">"identity"</span>,</span>
<span>                alpha<span class="op">=</span><span class="va">alpha</span>, Mj<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">Mj</span>, Aj<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">Aj</span>, necc.attr<span class="op">=</span><span class="va">rp</span><span class="op">$</span><span class="va">necc.attr</span><span class="op">)</span></span>
<span><span class="co"># extract data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">sim.res</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="co">#############################################################################</span></span>
<span><span class="co"># EXAMPLE 3: Simulation based on already estimated RRUM model for data.ecpe</span></span>
<span><span class="co">#############################################################################</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="va"><a href="data.ecpe.html">data.ecpe</a></span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">q.matrix</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="va"><a href="data.ecpe.html">data.ecpe</a></span><span class="op">$</span><span class="va">q.matrix</span></span>
<span></span>
<span><span class="co">#***</span></span>
<span><span class="co"># (1) estimate reduced RUM model</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu"><a href="gdina.html">gdina</a></span><span class="op">(</span> data<span class="op">=</span><span class="va">dat</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, q.matrix<span class="op">=</span><span class="va">q.matrix</span>, rule<span class="op">=</span><span class="st">"RRUM"</span> <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#***</span></span>
<span><span class="co"># (2) simulate data according to RRUM model</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">977</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare design matrix by applying sim.gdina.prepare function</span></span>
<span><span class="va">rp</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina.prepare</span><span class="op">(</span> <span class="va">q.matrix</span> <span class="op">)</span></span>
<span><span class="va">necc.attr</span> <span class="op">&lt;-</span> <span class="va">rp</span><span class="op">$</span><span class="va">necc.attr</span></span>
<span></span>
<span><span class="co"># number of subjects to be simulated</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">5000</span></span>
<span><span class="co"># simulate attribute patterns</span></span>
<span><span class="va">probs</span> <span class="op">&lt;-</span> <span class="va">mod</span><span class="op">$</span><span class="va">attribute.patt</span><span class="op">$</span><span class="va">class.prob</span>   <span class="co"># probabilities</span></span>
<span><span class="va">patt</span> <span class="op">&lt;-</span> <span class="va">mod</span><span class="op">$</span><span class="va">attribute.patt.splitted</span>      <span class="co"># response patterns</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="va">patt</span><span class="op">[</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span> <span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">probs</span><span class="op">)</span> <span class="op">)</span>, <span class="va">n</span>, prob<span class="op">=</span><span class="va">probs</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># simulate data using estimated item parameters</span></span>
<span><span class="va">sim.res</span> <span class="op">&lt;-</span> <span class="fu">CDM</span><span class="fu">::</span><span class="fu">sim.gdina</span><span class="op">(</span> n<span class="op">=</span><span class="va">n</span>, q.matrix<span class="op">=</span><span class="va">q.matrix</span>, delta<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">delta</span>, link<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">link</span>,</span>
<span>                alpha<span class="op">=</span><span class="va">alpha</span>, Mj<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">Mj</span>, Aj<span class="op">=</span><span class="va">mod</span><span class="op">$</span><span class="va">Aj</span>, necc.attr<span class="op">=</span><span class="va">rp</span><span class="op">$</span><span class="va">necc.attr</span><span class="op">)</span></span>
<span><span class="co"># extract data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">sim.res</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="op">}</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Robitzsch, Thomas Kiefer, Ann Cathrice George, Ali Uenlue.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

